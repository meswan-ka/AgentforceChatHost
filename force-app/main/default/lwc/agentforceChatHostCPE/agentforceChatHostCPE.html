<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 12-11-2025
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
    <div class="cpe-container">
        <!-- ==================== SETUP SECTION ==================== -->
        <div class="section-card">
            <div class="section-header" onclick={toggleSetup}>
                <div class="section-title">
                    <lightning-icon icon-name="utility:connected_apps" size="x-small"></lightning-icon>
                    <span>Setup</span>
                </div>
                <lightning-icon icon-name={setupIconName} size="x-small"></lightning-icon>
            </div>
            <template lwc:if={isSetupExpanded}>
                <div class="section-body">
                    <lightning-input
                        type="text"
                        name="deploymentDeveloperName"
                        label="Deployment API Name"
                        value={deploymentDeveloperName}
                        placeholder="e.g., Agentforce_Chat"
                        onchange={handleDeploymentChange}
                        required>
                    </lightning-input>
                    <p class="field-help">
                        Enter the API name of your Embedded Service Deployment from Setup.
                    </p>
                </div>
            </template>
        </div>

        <!-- ==================== APPEARANCE SECTION ==================== -->
        <div class="section-card">
            <div class="section-header" onclick={toggleAppearance}>
                <div class="section-title">
                    <lightning-icon icon-name="utility:palette" size="x-small"></lightning-icon>
                    <span>Appearance</span>
                </div>
                <lightning-icon icon-name={appearanceIconName} size="x-small"></lightning-icon>
            </div>
            <template lwc:if={isAppearanceExpanded}>
                <div class="section-body">
                    <!-- Height Picklist -->
                    <lightning-combobox
                        name="inlineHeight"
                        label="Height"
                        value={inlineHeight}
                        options={heightOptions}
                        onchange={handleHeightChange}
                        class="field-spacing">
                    </lightning-combobox>

                    <!-- Width Slider -->
                    <div class="slider-container field-spacing">
                        <label class="slider-label">Width: {inlineWidthPercent}%</label>
                        <lightning-slider
                            value={inlineWidthPercent}
                            min="30"
                            max="100"
                            step="5"
                            onchange={handleWidthChange}>
                        </lightning-slider>
                    </div>

                    <!-- Send Button Color -->
                    <div class="color-field field-spacing">
                        <label class="color-label">Send Button Color</label>
                        <div class="color-picker-row">
                            <input
                                type="color"
                                value={sendButtonColor}
                                onchange={handleSendButtonColorChange}
                                class="color-swatch">
                            <lightning-input
                                type="text"
                                value={sendButtonColor}
                                onchange={handleSendButtonColorChange}
                                class="color-hex-input"
                                variant="label-hidden">
                            </lightning-input>
                        </div>
                    </div>

                    <!-- Chat Colors Toggle -->
                    <div class="toggle-field field-spacing">
                        <lightning-input
                            type="toggle"
                            label="Customize Chat Colors"
                            checked={customizeChatColors}
                            onchange={handleCustomizeChatColorsToggle}
                            message-toggle-active=""
                            message-toggle-inactive="">
                        </lightning-input>
                        <p class="field-help">Style agent icons, message bubbles, and header to match your brand.</p>
                    </div>

                    <!-- Chat Colors (conditional) -->
                    <template lwc:if={showChatColorControls}>
                        <div class="nested-controls">
                            <!-- Agent Primary Color -->
                            <div class="color-field field-spacing">
                                <label class="color-label">Agent Primary Color</label>
                                <div class="color-picker-row">
                                    <input
                                        type="color"
                                        value={agentPrimaryColor}
                                        onchange={handleAgentPrimaryColorChange}
                                        class="color-swatch">
                                    <lightning-input
                                        type="text"
                                        value={agentPrimaryColor}
                                        onchange={handleAgentPrimaryColorChange}
                                        class="color-hex-input"
                                        variant="label-hidden">
                                    </lightning-input>
                                </div>
                                <p class="field-help">Used for agent icon, header title, and links.</p>
                            </div>

                            <!-- Agent Bubble Color -->
                            <div class="color-field field-spacing">
                                <label class="color-label">Agent Message Background</label>
                                <div class="color-picker-row">
                                    <input
                                        type="color"
                                        value={agentBubbleColor}
                                        onchange={handleAgentBubbleColorChange}
                                        class="color-swatch">
                                    <lightning-input
                                        type="text"
                                        value={agentBubbleColor}
                                        onchange={handleAgentBubbleColorChange}
                                        class="color-hex-input"
                                        variant="label-hidden">
                                    </lightning-input>
                                </div>
                            </div>

                            <!-- User Bubble Color -->
                            <div class="color-field field-spacing">
                                <label class="color-label">User Message Background</label>
                                <div class="color-picker-row">
                                    <input
                                        type="color"
                                        value={userBubbleColor}
                                        onchange={handleUserBubbleColorChange}
                                        class="color-swatch">
                                    <lightning-input
                                        type="text"
                                        value={userBubbleColor}
                                        onchange={handleUserBubbleColorChange}
                                        class="color-hex-input"
                                        variant="label-hidden">
                                    </lightning-input>
                                </div>
                            </div>

                            <!-- Auto Text Color Toggle -->
                            <div class="toggle-field field-spacing">
                                <lightning-input
                                    type="toggle"
                                    label="Auto Text Color"
                                    checked={autoUserTextColor}
                                    onchange={handleAutoUserTextColorToggle}
                                    message-toggle-active=""
                                    message-toggle-inactive="">
                                </lightning-input>
                                <p class="field-help">
                                    Automatically set text color for contrast. Current: <strong>{calculatedUserTextColor}</strong>
                                </p>
                            </div>

                            <!-- Manual Text Color (only if auto is off) -->
                            <template lwc:if={showUserTextColorPicker}>
                                <div class="color-field field-spacing">
                                    <label class="color-label">User Message Text Color</label>
                                    <div class="color-picker-row">
                                        <input
                                            type="color"
                                            value={userTextColor}
                                            onchange={handleUserTextColorChange}
                                            class="color-swatch">
                                        <lightning-input
                                            type="text"
                                            value={userTextColor}
                                            onchange={handleUserTextColorChange}
                                            class="color-hex-input"
                                            variant="label-hidden">
                                        </lightning-input>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </template>

                    <!-- Gradient Toggle -->
                    <div class="toggle-field field-spacing">
                        <lightning-input
                            type="toggle"
                            label="Customize Background Gradient"
                            checked={customizeGradient}
                            onchange={handleCustomizeGradientToggle}
                            message-toggle-active=""
                            message-toggle-inactive="">
                        </lightning-input>
                    </div>

                    <!-- Gradient Colors (conditional) -->
                    <template lwc:if={showGradientControls}>
                        <div class="nested-controls">
                            <!-- Start Color -->
                            <div class="color-field">
                                <label class="color-label">Gradient Start (Top)</label>
                                <div class="color-picker-row">
                                    <input
                                        type="color"
                                        value={gradientStartColor}
                                        onchange={handleGradientStartColorChange}
                                        class="color-swatch">
                                    <lightning-input
                                        type="text"
                                        value={gradientStartColor}
                                        onchange={handleGradientStartColorChange}
                                        class="color-hex-input"
                                        variant="label-hidden">
                                    </lightning-input>
                                </div>
                            </div>

                            <!-- End Color -->
                            <div class="color-field">
                                <label class="color-label">Gradient End (Bottom)</label>
                                <div class="color-picker-row">
                                    <input
                                        type="color"
                                        value={gradientEndColor}
                                        onchange={handleGradientEndColorChange}
                                        class="color-swatch">
                                    <lightning-input
                                        type="text"
                                        value={gradientEndColor}
                                        onchange={handleGradientEndColorChange}
                                        class="color-hex-input"
                                        variant="label-hidden">
                                    </lightning-input>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </template>
        </div>

        <!-- ==================== WELCOME & BRANDING SECTION ==================== -->
        <div class="section-card">
            <div class="section-header" onclick={toggleWelcome}>
                <div class="section-title">
                    <lightning-icon icon-name="utility:text" size="x-small"></lightning-icon>
                    <span>Welcome &amp; Branding</span>
                </div>
                <lightning-icon icon-name={welcomeIconName} size="x-small"></lightning-icon>
            </div>
            <template lwc:if={isWelcomeExpanded}>
                <div class="section-body">
                    <!-- Welcome Title -->
                    <lightning-input
                        type="text"
                        name="welcomeTitle"
                        label="Welcome Title"
                        value={welcomeTitle}
                        placeholder="How can Agentforce help?"
                        onchange={handleWelcomeTitleChange}
                        class="field-spacing">
                    </lightning-input>

                    <!-- Welcome Message -->
                    <lightning-textarea
                        name="welcomeMessage"
                        label="Welcome Message"
                        value={welcomeMessage}
                        placeholder="Ask questions, get personalized answers, and take action with Agentforce."
                        onchange={handleWelcomeMessageChange}
                        class="field-spacing">
                    </lightning-textarea>

                    <!-- Chat Header Title -->
                    <lightning-input
                        type="text"
                        name="chatHeaderTitle"
                        label="Chat Header Title"
                        value={chatHeaderTitle}
                        placeholder="Agentforce"
                        onchange={handleChatHeaderTitleChange}
                        class="field-spacing">
                    </lightning-input>
                    <p class="field-help">Title displayed at the top of the chat window.</p>

                    <!-- Callout Word Toggle -->
                    <div class="toggle-field field-spacing">
                        <lightning-input
                            type="toggle"
                            label="Customize Callout Word"
                            checked={customizeCalloutWord}
                            onchange={handleCustomizeCalloutWordToggle}
                            message-toggle-active=""
                            message-toggle-inactive="">
                        </lightning-input>
                        <p class="field-help">Style a word in the welcome title differently.</p>
                    </div>

                    <!-- Callout Word Controls (conditional) -->
                    <template lwc:if={showCalloutWordControls}>
                        <div class="nested-controls">
                            <!-- Callout Word -->
                            <lightning-input
                                type="text"
                                name="calloutWord"
                                label="Callout Word"
                                value={calloutWord}
                                placeholder="Word to highlight"
                                onchange={handleCalloutWordChange}
                                class="field-spacing">
                            </lightning-input>

                            <!-- Callout Color -->
                            <div class="color-field field-spacing">
                                <label class="color-label">Callout Color</label>
                                <div class="color-picker-row">
                                    <input
                                        type="color"
                                        value={calloutColor}
                                        onchange={handleCalloutColorChange}
                                        class="color-swatch">
                                    <lightning-input
                                        type="text"
                                        value={calloutColor}
                                        onchange={handleCalloutColorChange}
                                        class="color-hex-input"
                                        variant="label-hidden">
                                    </lightning-input>
                                </div>
                            </div>

                            <!-- Style Buttons (Bold/Italic) -->
                            <div class="style-buttons-container field-spacing">
                                <label class="style-buttons-label">Text Style</label>
                                <div class="style-buttons">
                                    <lightning-button
                                        variant={boldButtonVariant}
                                        label="B"
                                        title="Bold"
                                        onclick={handleBoldToggle}
                                        class={boldButtonClass}>
                                    </lightning-button>
                                    <lightning-button
                                        variant={italicButtonVariant}
                                        label="I"
                                        title="Italic"
                                        onclick={handleItalicToggle}
                                        class={italicButtonClass}>
                                    </lightning-button>
                                </div>
                            </div>

                            <!-- Font Weight (only if Bold is selected) -->
                            <template lwc:if={calloutBold}>
                                <lightning-combobox
                                    name="calloutFontWeight"
                                    label="Font Weight"
                                    value={calloutFontWeight}
                                    options={fontWeightOptions}
                                    onchange={handleCalloutFontWeightChange}
                                    class="field-spacing">
                                </lightning-combobox>
                            </template>
                        </div>
                    </template>
                </div>
            </template>
        </div>

        <!-- ==================== SEARCH INTEGRATION SECTION ==================== -->
        <div class="section-card">
            <div class="section-header" onclick={toggleSearch}>
                <div class="section-title">
                    <lightning-icon icon-name="utility:search" size="x-small"></lightning-icon>
                    <span>Search Integration</span>
                </div>
                <lightning-icon icon-name={searchIconName} size="x-small"></lightning-icon>
            </div>
            <template lwc:if={isSearchExpanded}>
                <div class="section-body">
                    <p class="section-description">
                        Enable search integration when placing this component on a search results page.
                    </p>

                    <!-- Enable Search Toggle -->
                    <div class="toggle-field field-spacing">
                        <lightning-input
                            type="toggle"
                            label="Enable Search Integration"
                            checked={enableSearchIntegration}
                            onchange={handleSearchToggle}
                            message-toggle-active=""
                            message-toggle-inactive="">
                        </lightning-input>
                    </div>

                    <!-- Search Options (conditional) -->
                    <template lwc:if={showSearchOptions}>
                        <div class="nested-controls">
                            <lightning-input
                                type="text"
                                name="searchUrlParameter"
                                label="URL Parameter / Path Segment"
                                value={searchUrlParameter}
                                placeholder="term"
                                onchange={handleSearchUrlParameterChange}
                                class="field-spacing">
                            </lightning-input>
                            <p class="field-help">
                                Supports both query parameters (?term=query) and path-based URLs (/global-search/query).
                            </p>

                            <div class="toggle-field field-spacing">
                                <lightning-input
                                    type="toggle"
                                    label="Auto-start Chat on Search"
                                    checked={autoStartOnSearch}
                                    onchange={handleAutoStartToggle}
                                    message-toggle-active=""
                                    message-toggle-inactive="">
                                </lightning-input>
                                <p class="field-help">
                                    Automatically start the chat and send the search query when the page loads.
                                </p>
                            </div>
                        </div>
                    </template>
                </div>
            </template>
        </div>

        <!-- Footer Branding -->
        <div class="cpe-footer">
            <div class="footer-brand">
                <span class="brand-ka">Kelley</span>
                <span class="brand-ka-austin"><span class="brand-diamond"></span>Austin</span>
                <span class="brand-separator"></span>
                <span class="brand-nowpart">NOW PART OF</span>
                <span class="brand-perficient"><span class="brand-p">P</span>ERFICIENT</span>
            </div>
            <div class="footer-version">Version: <span class="version-number">26.W</span></div>
        </div>
    </div>
</template>
